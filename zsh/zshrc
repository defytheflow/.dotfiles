#!/usr/bin/zsh

# File:      .zshrc
# Purpose:   configure user interactive shell
# Created:   22.03.2020
# Modified:  28.03.2020
# Author:    Artyom Danilov


# Options
# ------------------------------------------------------------------------------

# Don't type cd to change directories.
setopt autocd autopushd

# Enable autocompletion.
autoload -Uz compinit
compinit -d ${XDG_CACHE_HOME}/zsh/zcompdump-${ZSH_VERSION}

# Enable arrow-key driven interface (to activate menu press <Tab> twice).
zstyle ':completion:*' menu select

zmodload zsh/complist

# Include hidden files in autocomplete:
_comp_options+=(globdots)

# Enable vim bindings.
bindkey -v

# Use vim keys in tab complete menu:
bindkey -M menuselect 'h' vi-backward-char
bindkey -M menuselect 'j' vi-down-line-or-history
bindkey -M menuselect 'k' vi-up-line-or-history
bindkey -M menuselect 'l' vi-forward-char


# Config files
# ------------------------------------------------------------------------------
# Load shell-independent config files (must be first).
for file in "${HOME}"/.dotfiles/shell/; do
    . "${file}"
done

# Load zsh-specific config files.
for file in 'alias' 'env' 'function' 'prompt'; do
    [ -f "${HOME}"/.dotfiles/zsh/$"{file}" ] && . "${HOME}"/.dotfiles/zsh/$"{file}"
done

# Check if running on wsl.
if grep -qEi '(Microsoft|WSL)' /proc/version > /dev/null 2>&1; then
    # Load wsl-specific config files.
    for file in "${HOME}"/.dotfiles/wsl/*; do
        . "${file}"
    done
fi


# Plugins
# ------------------------------------------------------------------------------
# Load plugins (must be last).
. ${ZSH_PLUGINS}/zsh-autosuggestions/zsh-autosuggestions.zsh
. ${ZSH_PLUGINS}/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
. ${ZSH_PLUGINS}/alias-tips/alias-tips.plugin.zsh
. ${ZSH_PLUGINS}/command-not-found/command-not-found.plugin.zsh
