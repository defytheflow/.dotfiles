#!/bin/bash

# File:     bashprompt
# Created:  26.03.2020
# Author:   Artyom Danilov (@defytheflow)


# Colors
cyan="$(tput setaf 45)"
green="$(tput setaf 82)"
dark_green="$(tput setaf 22)"
lime_green="$(tput setaf 154)"
orange="$(tput setaf 202)"
purple="$(tput setaf 135)"
red="$(tput setaf 160)"
white="$(tput setaf 15)"
yellow="$(tput setaf 220)"
bold="$(tput bold)"
reset="$(tput sgr0)"

# Execute each time prompt is drawn.
PROMPT_COMMAND=my_prompt

function my_prompt() {
    # get last command exit status.
    if [ $? -eq 0 ]; then
        local exit_status=" ${green}:)"
    else
        local exit_status=" ${red}:("
    fi

    # if root, highlight everything in red.
    if [ "$(whoami)" = 'root' ]; then
        PS1="\n${red}\u"                    # root
        PS1+="${white} at ${red}\h"         # host
        PS1+="${white} in ${red}\w"         # absolute directory
    else
        PS1="\n${purple}\u"                 # username
        PS1+="${white} at ${orange}\h"      # host
        PS1+="${white} in ${lime_green}\w"  # absolute directory
    fi
    PS1+="${exit_status}${reset}\n\$ "      # :) or :(
}
